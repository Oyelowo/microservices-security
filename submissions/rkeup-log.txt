microservices-security/starter on  main via ⍱ v2.2.18 on ☁️  (eu-central-1) on ☁️  oyedayooyelowo1@gmail.com(europe-central2) took 29s 
❯ rke up    
INFO[0000] Running RKE version: v1.3.1                  
INFO[0000] Initiating Kubernetes cluster                
INFO[0000] [dialer] Setup tunnel for host [192.168.50.109] 
INFO[0000] Checking if container [cluster-state-deployer] is running on host [192.168.50.109], try #1 
INFO[0000] [certificates] Generating CA kubernetes certificates 
INFO[0000] [certificates] Generating Kubernetes API server aggregation layer requestheader client CA certificates 
INFO[0000] [certificates] Generating Kubernetes API server certificates 
INFO[0001] [certificates] Generating Service account token key 
INFO[0001] [certificates] Generating Kube Controller certificates 
INFO[0001] [certificates] Generating Kube Scheduler certificates 
INFO[0001] [certificates] Generating Kube Proxy certificates 
INFO[0001] [certificates] Generating Node certificate   
INFO[0001] [certificates] Generating admin certificates and kubeconfig 
INFO[0001] [certificates] Generating Kubernetes API server proxy client certificates 
INFO[0001] [certificates] Generating kube-etcd-192-168-50-109 certificate and key 
INFO[0002] Successfully Deployed state file at [./cluster.rkestate] 
INFO[0002] Building Kubernetes cluster                  
INFO[0002] [dialer] Setup tunnel for host [192.168.50.109] 
INFO[0002] [network] Deploying port listener containers 
INFO[0002] Image [rancher/rke-tools:v0.1.72] exists on host [192.168.50.109] 
INFO[0002] Starting container [rke-etcd-port-listener] on host [192.168.50.109], try #1 
INFO[0004] [network] Successfully started [rke-etcd-port-listener] container on host [192.168.50.109] 
INFO[0004] Image [rancher/rke-tools:v0.1.72] exists on host [192.168.50.109] 
INFO[0004] Starting container [rke-cp-port-listener] on host [192.168.50.109], try #1 
INFO[0006] [network] Successfully started [rke-cp-port-listener] container on host [192.168.50.109] 
INFO[0006] Image [rancher/rke-tools:v0.1.72] exists on host [192.168.50.109] 
INFO[0006] Starting container [rke-worker-port-listener] on host [192.168.50.109], try #1 
INFO[0007] [network] Successfully started [rke-worker-port-listener] container on host [192.168.50.109] 
INFO[0007] [network] Port listener containers deployed successfully 
INFO[0007] [network] Running control plane -> etcd port checks 
INFO[0007] [network] Checking if host [192.168.50.109] can connect to host(s) [192.168.50.109] on port(s) [2379], try #1 
INFO[0007] Image [rancher/rke-tools:v0.1.72] exists on host [192.168.50.109] 
INFO[0007] Starting container [rke-port-checker] on host [192.168.50.109], try #1 
INFO[0008] [network] Successfully started [rke-port-checker] container on host [192.168.50.109] 
INFO[0008] Removing container [rke-port-checker] on host [192.168.50.109], try #1 
INFO[0008] [network] Running control plane -> worker port checks 
INFO[0008] [network] Checking if host [192.168.50.109] can connect to host(s) [192.168.50.109] on port(s) [10250], try #1 
INFO[0008] Image [rancher/rke-tools:v0.1.72] exists on host [192.168.50.109] 
INFO[0009] Starting container [rke-port-checker] on host [192.168.50.109], try #1 
INFO[0010] [network] Successfully started [rke-port-checker] container on host [192.168.50.109] 
INFO[0010] Removing container [rke-port-checker] on host [192.168.50.109], try #1 
INFO[0010] [network] Running workers -> control plane port checks 
INFO[0010] [network] Checking if host [192.168.50.109] can connect to host(s) [192.168.50.109] on port(s) [6443], try #1 
INFO[0010] Image [rancher/rke-tools:v0.1.72] exists on host [192.168.50.109] 
INFO[0010] Starting container [rke-port-checker] on host [192.168.50.109], try #1 
INFO[0011] [network] Successfully started [rke-port-checker] container on host [192.168.50.109] 
INFO[0011] Removing container [rke-port-checker] on host [192.168.50.109], try #1 
INFO[0011] [network] Checking KubeAPI port Control Plane hosts 
INFO[0011] [network] Removing port listener containers  
INFO[0011] Removing container [rke-etcd-port-listener] on host [192.168.50.109], try #1 
INFO[0012] [remove/rke-etcd-port-listener] Successfully removed container on host [192.168.50.109] 
INFO[0012] Removing container [rke-cp-port-listener] on host [192.168.50.109], try #1 
INFO[0012] [remove/rke-cp-port-listener] Successfully removed container on host [192.168.50.109] 
INFO[0012] Removing container [rke-worker-port-listener] on host [192.168.50.109], try #1 
INFO[0013] [remove/rke-worker-port-listener] Successfully removed container on host [192.168.50.109] 
INFO[0013] [network] Port listener containers removed successfully 
INFO[0013] [certificates] Deploying kubernetes certificates to Cluster nodes 
INFO[0013] Checking if container [cert-deployer] is running on host [192.168.50.109], try #1 
INFO[0013] Image [rancher/rke-tools:v0.1.72] exists on host [192.168.50.109] 
INFO[0013] Starting container [cert-deployer] on host [192.168.50.109], try #1 
INFO[0013] Checking if container [cert-deployer] is running on host [192.168.50.109], try #1 
INFO[0019] Checking if container [cert-deployer] is running on host [192.168.50.109], try #1 
INFO[0019] Removing container [cert-deployer] on host [192.168.50.109], try #1 
INFO[0019] [reconcile] Rebuilding and updating local kube config 
INFO[0019] Successfully Deployed local admin kubeconfig at [./kube_config_cluster.yml] 
WARN[0019] [reconcile] host [192.168.50.109] is a control plane node without reachable Kubernetes API endpoint in the cluster 
WARN[0019] [reconcile] no control plane node with reachable Kubernetes API endpoint in the cluster found 
INFO[0019] [certificates] Successfully deployed kubernetes certificates to Cluster nodes 
INFO[0019] [file-deploy] Deploying file [/etc/kubernetes/ssl/encryption.yaml] to node [192.168.50.109] 
INFO[0019] Image [rancher/rke-tools:v0.1.72] exists on host [192.168.50.109] 
INFO[0019] Starting container [file-deployer] on host [192.168.50.109], try #1 
INFO[0020] Successfully started [file-deployer] container on host [192.168.50.109] 
INFO[0020] Waiting for [file-deployer] container to exit on host [192.168.50.109] 
INFO[0020] Waiting for [file-deployer] container to exit on host [192.168.50.109] 
INFO[0020] Removing container [file-deployer] on host [192.168.50.109], try #1 
INFO[0020] [remove/file-deployer] Successfully removed container on host [192.168.50.109] 
INFO[0020] [file-deploy] Deploying file [/etc/kubernetes/admission.yaml] to node [192.168.50.109] 
INFO[0020] Image [rancher/rke-tools:v0.1.72] exists on host [192.168.50.109] 
INFO[0020] Starting container [file-deployer] on host [192.168.50.109], try #1 
INFO[0021] Successfully started [file-deployer] container on host [192.168.50.109] 
INFO[0021] Waiting for [file-deployer] container to exit on host [192.168.50.109] 
INFO[0021] Waiting for [file-deployer] container to exit on host [192.168.50.109] 
INFO[0021] Removing container [file-deployer] on host [192.168.50.109], try #1 
INFO[0021] [remove/file-deployer] Successfully removed container on host [192.168.50.109] 
INFO[0021] [/etc/kubernetes/admission.yaml] Successfully deployed admission control config to Cluster control nodes 
INFO[0021] [file-deploy] Deploying file [/etc/kubernetes/audit-policy.yaml] to node [192.168.50.109] 
INFO[0021] Image [rancher/rke-tools:v0.1.72] exists on host [192.168.50.109] 
INFO[0021] Starting container [file-deployer] on host [192.168.50.109], try #1 
INFO[0022] Successfully started [file-deployer] container on host [192.168.50.109] 
INFO[0022] Waiting for [file-deployer] container to exit on host [192.168.50.109] 
INFO[0022] Waiting for [file-deployer] container to exit on host [192.168.50.109] 
INFO[0023] Removing container [file-deployer] on host [192.168.50.109], try #1 
INFO[0023] [remove/file-deployer] Successfully removed container on host [192.168.50.109] 
INFO[0023] [/etc/kubernetes/audit-policy.yaml] Successfully deployed audit policy file to Cluster control nodes 
INFO[0023] [reconcile] Reconciling cluster state        
INFO[0023] [reconcile] This is newly generated cluster  
INFO[0023] Pre-pulling kubernetes images                
INFO[0023] Image [rancher/hyperkube:v1.20.4-rancher1] exists on host [192.168.50.109] 
INFO[0023] Kubernetes images pulled successfully        
INFO[0023] [etcd] Building up etcd plane..              
INFO[0023] Image [rancher/rke-tools:v0.1.72] exists on host [192.168.50.109] 
INFO[0023] Starting container [etcd-fix-perm] on host [192.168.50.109], try #1 
INFO[0024] Successfully started [etcd-fix-perm] container on host [192.168.50.109] 
INFO[0024] Waiting for [etcd-fix-perm] container to exit on host [192.168.50.109] 
INFO[0024] Waiting for [etcd-fix-perm] container to exit on host [192.168.50.109] 
INFO[0024] Removing container [etcd-fix-perm] on host [192.168.50.109], try #1 
INFO[0024] [remove/etcd-fix-perm] Successfully removed container on host [192.168.50.109] 
INFO[0024] Image [rancher/coreos-etcd:v3.4.14-rancher1] exists on host [192.168.50.109] 
INFO[0024] Starting container [etcd] on host [192.168.50.109], try #1 
INFO[0025] [etcd] Successfully started [etcd] container on host [192.168.50.109] 
INFO[0025] [etcd] Running rolling snapshot container [etcd-snapshot-once] on host [192.168.50.109] 
INFO[0025] Image [rancher/rke-tools:v0.1.78] exists on host [192.168.50.109] 
INFO[0026] Starting container [etcd-rolling-snapshots] on host [192.168.50.109], try #1 
INFO[0026] [etcd] Successfully started [etcd-rolling-snapshots] container on host [192.168.50.109] 
INFO[0031] Image [rancher/rke-tools:v0.1.78] exists on host [192.168.50.109] 
INFO[0032] Starting container [rke-bundle-cert] on host [192.168.50.109], try #1 
INFO[0033] [certificates] Successfully started [rke-bundle-cert] container on host [192.168.50.109] 
INFO[0033] Waiting for [rke-bundle-cert] container to exit on host [192.168.50.109] 
INFO[0033] [certificates] successfully saved certificate bundle [/opt/rke/etcd-snapshots//pki.bundle.tar.gz] on host [192.168.50.109] 
INFO[0033] Removing container [rke-bundle-cert] on host [192.168.50.109], try #1 
INFO[0033] Image [rancher/rke-tools:v0.1.72] exists on host [192.168.50.109] 
INFO[0033] Starting container [rke-log-linker] on host [192.168.50.109], try #1 
INFO[0034] [etcd] Successfully started [rke-log-linker] container on host [192.168.50.109] 
INFO[0034] Removing container [rke-log-linker] on host [192.168.50.109], try #1 
INFO[0034] [remove/rke-log-linker] Successfully removed container on host [192.168.50.109] 
INFO[0034] Image [rancher/rke-tools:v0.1.72] exists on host [192.168.50.109] 
INFO[0035] Starting container [rke-log-linker] on host [192.168.50.109], try #1 
INFO[0035] [etcd] Successfully started [rke-log-linker] container on host [192.168.50.109] 
INFO[0035] Removing container [rke-log-linker] on host [192.168.50.109], try #1 
INFO[0035] [remove/rke-log-linker] Successfully removed container on host [192.168.50.109] 
INFO[0035] [etcd] Successfully started etcd plane.. Checking etcd cluster health 
WARN[0127] [etcd] host [192.168.50.109] failed to check etcd health: failed to get /health for host [192.168.50.109]: Get "https://192.168.50.109:2379/health": remote error: tls: bad certificate 
FATA[0127] [etcd] Failed to bring up Etcd Plane: etcd cluster is unhealthy: hosts [192.168.50.109] failed to report healthy. Check etcd container logs on each host for more information 

microservices-security/starter on  main [!?] via ⍱ v2.2.18 on ☁️  (eu-central-1) on ☁️  oyedayooyelowo1@gmail.com(europe-central2) took 2m7s 
❯ kubectl --kubeconfig kube_config_cluster.yml get pod

The connection to the server 192.168.50.109:6443 was refused - did you specify the right host or port?

microservices-security/starter on  main [!?] via ⍱ v2.2.18 on ☁️  (eu-central-1) on ☁️  oyedayooyelowo1@gmail.com(europe-central2) took 5s 
❯ ssh root@192.168.50.109                             
Last login: Tue Nov  2 23:38:58 2021 from 192.168.50.1
Have a lot of fun...
localhost:~ # exit
logout
Connection to 192.168.50.109 closed.

microservices-security/starter on  main [!?] via ⍱ v2.2.18 on ☁️  (eu-central-1) on ☁️  oyedayooyelowo1@gmail.com(europe-central2) took 3s 
❯ kubectl --kubeconfig kube_config_cluster.yml get no 

The connection to the server 192.168.50.109:6443 was refused - did you specify the right host or port?

microservices-security/starter on  main [!?] via ⍱ v2.2.18 on ☁️  (eu-central-1) on ☁️  oyedayooyelowo1@gmail.com(europe-central2) took 5s 
❯ rke up                                              
INFO[0000] Running RKE version: v1.3.1                  
INFO[0000] Initiating Kubernetes cluster                
INFO[0000] [certificates] Generating admin certificates and kubeconfig 
INFO[0000] Successfully Deployed state file at [./cluster.rkestate] 
INFO[0000] Building Kubernetes cluster                  
INFO[0000] [dialer] Setup tunnel for host [192.168.50.109] 
INFO[0000] [network] Deploying port listener containers 
INFO[0000] Image [rancher/rke-tools:v0.1.72] exists on host [192.168.50.109] 
INFO[0000] Starting container [rke-etcd-port-listener] on host [192.168.50.109], try #1 
INFO[0000] Image [rancher/rke-tools:v0.1.72] exists on host [192.168.50.109] 
INFO[0001] Starting container [rke-cp-port-listener] on host [192.168.50.109], try #1 
INFO[0002] [network] Successfully started [rke-cp-port-listener] container on host [192.168.50.109] 
INFO[0002] Image [rancher/rke-tools:v0.1.72] exists on host [192.168.50.109] 
INFO[0002] Starting container [rke-worker-port-listener] on host [192.168.50.109], try #1 
INFO[0003] [network] Successfully started [rke-worker-port-listener] container on host [192.168.50.109] 
INFO[0003] [network] Port listener containers deployed successfully 
INFO[0003] [network] Running control plane -> etcd port checks 
INFO[0003] [network] Checking if host [192.168.50.109] can connect to host(s) [192.168.50.109] on port(s) [2379], try #1 
INFO[0003] Image [rancher/rke-tools:v0.1.72] exists on host [192.168.50.109] 
INFO[0003] Starting container [rke-port-checker] on host [192.168.50.109], try #1 
INFO[0003] [network] Successfully started [rke-port-checker] container on host [192.168.50.109] 
INFO[0003] Removing container [rke-port-checker] on host [192.168.50.109], try #1 
INFO[0003] [network] Running control plane -> worker port checks 
INFO[0003] [network] Checking if host [192.168.50.109] can connect to host(s) [192.168.50.109] on port(s) [10250], try #1 
INFO[0003] Image [rancher/rke-tools:v0.1.72] exists on host [192.168.50.109] 
INFO[0003] Starting container [rke-port-checker] on host [192.168.50.109], try #1 
INFO[0004] [network] Successfully started [rke-port-checker] container on host [192.168.50.109] 
INFO[0004] Removing container [rke-port-checker] on host [192.168.50.109], try #1 
INFO[0004] [network] Running workers -> control plane port checks 
INFO[0004] [network] Checking if host [192.168.50.109] can connect to host(s) [192.168.50.109] on port(s) [6443], try #1 
INFO[0004] Image [rancher/rke-tools:v0.1.72] exists on host [192.168.50.109] 
INFO[0004] Starting container [rke-port-checker] on host [192.168.50.109], try #1 
INFO[0005] [network] Successfully started [rke-port-checker] container on host [192.168.50.109] 
INFO[0005] Removing container [rke-port-checker] on host [192.168.50.109], try #1 
INFO[0005] [network] Checking KubeAPI port Control Plane hosts 
INFO[0005] [network] Removing port listener containers  
INFO[0005] Removing container [rke-etcd-port-listener] on host [192.168.50.109], try #1 
INFO[0005] [remove/rke-etcd-port-listener] Successfully removed container on host [192.168.50.109] 
INFO[0005] Removing container [rke-cp-port-listener] on host [192.168.50.109], try #1 
INFO[0006] [remove/rke-cp-port-listener] Successfully removed container on host [192.168.50.109] 
INFO[0006] Removing container [rke-worker-port-listener] on host [192.168.50.109], try #1 
INFO[0006] [remove/rke-worker-port-listener] Successfully removed container on host [192.168.50.109] 
INFO[0006] [network] Port listener containers removed successfully 
INFO[0006] [certificates] Deploying kubernetes certificates to Cluster nodes 
INFO[0006] Checking if container [cert-deployer] is running on host [192.168.50.109], try #1 
INFO[0006] Image [rancher/rke-tools:v0.1.72] exists on host [192.168.50.109] 
INFO[0006] Starting container [cert-deployer] on host [192.168.50.109], try #1 
INFO[0007] Checking if container [cert-deployer] is running on host [192.168.50.109], try #1 
INFO[0012] Checking if container [cert-deployer] is running on host [192.168.50.109], try #1 
INFO[0012] Removing container [cert-deployer] on host [192.168.50.109], try #1 
INFO[0012] [reconcile] Rebuilding and updating local kube config 
INFO[0012] Successfully Deployed local admin kubeconfig at [./kube_config_cluster.yml] 
WARN[0013] [reconcile] host [192.168.50.109] is a control plane node without reachable Kubernetes API endpoint in the cluster 
WARN[0013] [reconcile] no control plane node with reachable Kubernetes API endpoint in the cluster found 
INFO[0013] [certificates] Successfully deployed kubernetes certificates to Cluster nodes 
INFO[0013] [file-deploy] Deploying file [/etc/kubernetes/ssl/encryption.yaml] to node [192.168.50.109] 
INFO[0013] Image [rancher/rke-tools:v0.1.72] exists on host [192.168.50.109] 
INFO[0013] Starting container [file-deployer] on host [192.168.50.109], try #1 
INFO[0014] Successfully started [file-deployer] container on host [192.168.50.109] 
INFO[0014] Waiting for [file-deployer] container to exit on host [192.168.50.109] 
INFO[0014] Waiting for [file-deployer] container to exit on host [192.168.50.109] 
INFO[0014] Container [file-deployer] is still running on host [192.168.50.109]: stderr: [], stdout: [] 
INFO[0015] Waiting for [file-deployer] container to exit on host [192.168.50.109] 
INFO[0015] Removing container [file-deployer] on host [192.168.50.109], try #1 
INFO[0015] [remove/file-deployer] Successfully removed container on host [192.168.50.109] 
INFO[0015] [file-deploy] Deploying file [/etc/kubernetes/admission.yaml] to node [192.168.50.109] 
INFO[0015] Image [rancher/rke-tools:v0.1.72] exists on host [192.168.50.109] 
INFO[0015] Starting container [file-deployer] on host [192.168.50.109], try #1 
INFO[0016] Successfully started [file-deployer] container on host [192.168.50.109] 
INFO[0016] Waiting for [file-deployer] container to exit on host [192.168.50.109] 
INFO[0016] Waiting for [file-deployer] container to exit on host [192.168.50.109] 
INFO[0016] Container [file-deployer] is still running on host [192.168.50.109]: stderr: [], stdout: [] 
INFO[0017] Waiting for [file-deployer] container to exit on host [192.168.50.109] 
INFO[0017] Removing container [file-deployer] on host [192.168.50.109], try #1 
INFO[0017] [remove/file-deployer] Successfully removed container on host [192.168.50.109] 
INFO[0017] [/etc/kubernetes/admission.yaml] Successfully deployed admission control config to Cluster control nodes 
INFO[0017] [file-deploy] Deploying file [/etc/kubernetes/audit-policy.yaml] to node [192.168.50.109] 
INFO[0017] Image [rancher/rke-tools:v0.1.72] exists on host [192.168.50.109] 
INFO[0017] Starting container [file-deployer] on host [192.168.50.109], try #1 
INFO[0018] Successfully started [file-deployer] container on host [192.168.50.109] 
INFO[0018] Waiting for [file-deployer] container to exit on host [192.168.50.109] 
INFO[0018] Waiting for [file-deployer] container to exit on host [192.168.50.109] 
INFO[0018] Removing container [file-deployer] on host [192.168.50.109], try #1 
INFO[0018] [remove/file-deployer] Successfully removed container on host [192.168.50.109] 
INFO[0018] [/etc/kubernetes/audit-policy.yaml] Successfully deployed audit policy file to Cluster control nodes 
INFO[0018] [reconcile] Reconciling cluster state        
INFO[0018] [reconcile] This is newly generated cluster  
INFO[0018] Pre-pulling kubernetes images                
INFO[0018] Image [rancher/hyperkube:v1.20.4-rancher1] exists on host [192.168.50.109] 
INFO[0018] Kubernetes images pulled successfully        
INFO[0018] [etcd] Building up etcd plane..              
INFO[0018] Image [rancher/rke-tools:v0.1.72] exists on host [192.168.50.109] 
INFO[0018] Starting container [etcd-fix-perm] on host [192.168.50.109], try #1 
INFO[0019] Successfully started [etcd-fix-perm] container on host [192.168.50.109] 
INFO[0019] Waiting for [etcd-fix-perm] container to exit on host [192.168.50.109] 
INFO[0019] Waiting for [etcd-fix-perm] container to exit on host [192.168.50.109] 
INFO[0020] Removing container [etcd-fix-perm] on host [192.168.50.109], try #1 
INFO[0020] [remove/etcd-fix-perm] Successfully removed container on host [192.168.50.109] 
INFO[0020] [etcd] Running rolling snapshot container [etcd-snapshot-once] on host [192.168.50.109] 
INFO[0020] Removing container [etcd-rolling-snapshots] on host [192.168.50.109], try #1 
INFO[0020] [remove/etcd-rolling-snapshots] Successfully removed container on host [192.168.50.109] 
INFO[0020] Image [rancher/rke-tools:v0.1.78] exists on host [192.168.50.109] 
INFO[0020] Starting container [etcd-rolling-snapshots] on host [192.168.50.109], try #1 
INFO[0021] [etcd] Successfully started [etcd-rolling-snapshots] container on host [192.168.50.109] 
INFO[0026] Image [rancher/rke-tools:v0.1.78] exists on host [192.168.50.109] 
INFO[0026] Starting container [rke-bundle-cert] on host [192.168.50.109], try #1 
INFO[0027] [certificates] Successfully started [rke-bundle-cert] container on host [192.168.50.109] 
INFO[0027] Waiting for [rke-bundle-cert] container to exit on host [192.168.50.109] 
INFO[0027] Container [rke-bundle-cert] is still running on host [192.168.50.109]: stderr: [], stdout: [] 
INFO[0028] Waiting for [rke-bundle-cert] container to exit on host [192.168.50.109] 
INFO[0028] [certificates] successfully saved certificate bundle [/opt/rke/etcd-snapshots//pki.bundle.tar.gz] on host [192.168.50.109] 
INFO[0028] Removing container [rke-bundle-cert] on host [192.168.50.109], try #1 
INFO[0028] Image [rancher/rke-tools:v0.1.72] exists on host [192.168.50.109] 
INFO[0028] Starting container [rke-log-linker] on host [192.168.50.109], try #1 
INFO[0028] [etcd] Successfully started [rke-log-linker] container on host [192.168.50.109] 
INFO[0028] Removing container [rke-log-linker] on host [192.168.50.109], try #1 
INFO[0029] [remove/rke-log-linker] Successfully removed container on host [192.168.50.109] 
INFO[0029] Image [rancher/rke-tools:v0.1.72] exists on host [192.168.50.109] 
INFO[0029] Starting container [rke-log-linker] on host [192.168.50.109], try #1 
INFO[0029] [etcd] Successfully started [rke-log-linker] container on host [192.168.50.109] 
INFO[0029] Removing container [rke-log-linker] on host [192.168.50.109], try #1 
INFO[0030] [remove/rke-log-linker] Successfully removed container on host [192.168.50.109] 
INFO[0030] [etcd] Successfully started etcd plane.. Checking etcd cluster health 
INFO[0030] [etcd] etcd host [192.168.50.109] reported healthy=true 
INFO[0030] [controlplane] Building up Controller Plane.. 
INFO[0030] Checking if container [service-sidekick] is running on host [192.168.50.109], try #1 
INFO[0030] Image [rancher/rke-tools:v0.1.72] exists on host [192.168.50.109] 
INFO[0030] Image [rancher/hyperkube:v1.20.4-rancher1] exists on host [192.168.50.109] 
INFO[0030] Starting container [kube-apiserver] on host [192.168.50.109], try #1 
INFO[0030] [controlplane] Successfully started [kube-apiserver] container on host [192.168.50.109] 
INFO[0030] [healthcheck] Start Healthcheck on service [kube-apiserver] on host [192.168.50.109] 
INFO[0044] [healthcheck] service [kube-apiserver] on host [192.168.50.109] is healthy 
INFO[0045] Image [rancher/rke-tools:v0.1.72] exists on host [192.168.50.109] 
INFO[0045] Starting container [rke-log-linker] on host [192.168.50.109], try #1 
INFO[0046] [controlplane] Successfully started [rke-log-linker] container on host [192.168.50.109] 
INFO[0046] Removing container [rke-log-linker] on host [192.168.50.109], try #1 
INFO[0046] [remove/rke-log-linker] Successfully removed container on host [192.168.50.109] 
INFO[0046] Image [rancher/hyperkube:v1.20.4-rancher1] exists on host [192.168.50.109] 
INFO[0046] Starting container [kube-controller-manager] on host [192.168.50.109], try #1 
INFO[0047] [controlplane] Successfully started [kube-controller-manager] container on host [192.168.50.109] 
INFO[0047] [healthcheck] Start Healthcheck on service [kube-controller-manager] on host [192.168.50.109] 
INFO[0053] [healthcheck] service [kube-controller-manager] on host [192.168.50.109] is healthy 
INFO[0053] Image [rancher/rke-tools:v0.1.72] exists on host [192.168.50.109] 
INFO[0053] Starting container [rke-log-linker] on host [192.168.50.109], try #1 
INFO[0054] [controlplane] Successfully started [rke-log-linker] container on host [192.168.50.109] 
INFO[0054] Removing container [rke-log-linker] on host [192.168.50.109], try #1 
INFO[0054] [remove/rke-log-linker] Successfully removed container on host [192.168.50.109] 
INFO[0054] Image [rancher/hyperkube:v1.20.4-rancher1] exists on host [192.168.50.109] 
INFO[0055] Starting container [kube-scheduler] on host [192.168.50.109], try #1 
INFO[0056] [controlplane] Successfully started [kube-scheduler] container on host [192.168.50.109] 
INFO[0056] [healthcheck] Start Healthcheck on service [kube-scheduler] on host [192.168.50.109] 
INFO[0061] [healthcheck] service [kube-scheduler] on host [192.168.50.109] is healthy 
INFO[0061] Image [rancher/rke-tools:v0.1.72] exists on host [192.168.50.109] 
INFO[0062] Starting container [rke-log-linker] on host [192.168.50.109], try #1 
INFO[0062] [controlplane] Successfully started [rke-log-linker] container on host [192.168.50.109] 
INFO[0062] Removing container [rke-log-linker] on host [192.168.50.109], try #1 
INFO[0063] [remove/rke-log-linker] Successfully removed container on host [192.168.50.109] 
INFO[0063] [controlplane] Successfully started Controller Plane.. 
INFO[0063] [authz] Creating rke-job-deployer ServiceAccount 
INFO[0063] [authz] rke-job-deployer ServiceAccount created successfully 
INFO[0063] [authz] Creating system:node ClusterRoleBinding 
INFO[0063] [authz] system:node ClusterRoleBinding created successfully 
INFO[0063] [authz] Creating kube-apiserver proxy ClusterRole and ClusterRoleBinding 
INFO[0063] [authz] kube-apiserver proxy ClusterRole and ClusterRoleBinding created successfully 
INFO[0063] [authz] Applying default PodSecurityPolicy   
INFO[0063] [authz] Default PodSecurityPolicy applied successfully 
INFO[0063] [authz] Applying default PodSecurityPolicy Role and RoleBinding in kube-system 
INFO[0063] [authz] Default PodSecurityPolicy Role and RoleBinding applied successfully 
INFO[0063] Successfully Deployed state file at [./cluster.rkestate] 
INFO[0063] [state] Saving full cluster state to Kubernetes 
INFO[0063] [state] Successfully Saved full cluster state to Kubernetes ConfigMap: full-cluster-state 
INFO[0063] [worker] Building up Worker Plane..          
INFO[0063] Checking if container [service-sidekick] is running on host [192.168.50.109], try #1 
INFO[0063] [sidekick] Sidekick container already created on host [192.168.50.109] 
INFO[0063] Image [rancher/hyperkube:v1.20.4-rancher1] exists on host [192.168.50.109] 
INFO[0063] Starting container [kubelet] on host [192.168.50.109], try #1 
INFO[0064] [worker] Successfully started [kubelet] container on host [192.168.50.109] 
INFO[0064] [healthcheck] Start Healthcheck on service [kubelet] on host [192.168.50.109] 
INFO[0079] [healthcheck] service [kubelet] on host [192.168.50.109] is healthy 
INFO[0080] Image [rancher/rke-tools:v0.1.72] exists on host [192.168.50.109] 
INFO[0080] Starting container [rke-log-linker] on host [192.168.50.109], try #1 
INFO[0086] [worker] Successfully started [rke-log-linker] container on host [192.168.50.109] 
INFO[0086] Removing container [rke-log-linker] on host [192.168.50.109], try #1 
INFO[0087] [remove/rke-log-linker] Successfully removed container on host [192.168.50.109] 
INFO[0087] Image [rancher/hyperkube:v1.20.4-rancher1] exists on host [192.168.50.109] 
INFO[0087] Starting container [kube-proxy] on host [192.168.50.109], try #1 
INFO[0087] [worker] Successfully started [kube-proxy] container on host [192.168.50.109] 
INFO[0087] [healthcheck] Start Healthcheck on service [kube-proxy] on host [192.168.50.109] 
INFO[0092] [healthcheck] service [kube-proxy] on host [192.168.50.109] is healthy 
INFO[0092] Image [rancher/rke-tools:v0.1.72] exists on host [192.168.50.109] 
INFO[0092] Starting container [rke-log-linker] on host [192.168.50.109], try #1 
INFO[0093] [worker] Successfully started [rke-log-linker] container on host [192.168.50.109] 
INFO[0093] Removing container [rke-log-linker] on host [192.168.50.109], try #1 
INFO[0093] [remove/rke-log-linker] Successfully removed container on host [192.168.50.109] 
INFO[0093] [worker] Successfully started Worker Plane.. 
INFO[0093] Image [rancher/rke-tools:v0.1.72] exists on host [192.168.50.109] 
INFO[0093] Starting container [rke-log-cleaner] on host [192.168.50.109], try #1 
INFO[0094] [cleanup] Successfully started [rke-log-cleaner] container on host [192.168.50.109] 
INFO[0094] Removing container [rke-log-cleaner] on host [192.168.50.109], try #1 
INFO[0094] [remove/rke-log-cleaner] Successfully removed container on host [192.168.50.109] 
INFO[0094] [sync] Syncing nodes Labels and Taints       
INFO[0094] [sync] Successfully synced nodes Labels and Taints 
INFO[0094] [network] Setting up network plugin: calico  
INFO[0094] [addons] Saving ConfigMap for addon rke-network-plugin to Kubernetes 
INFO[0094] [addons] Successfully saved ConfigMap for addon rke-network-plugin to Kubernetes 
INFO[0094] [addons] Executing deploy job rke-network-plugin 
INFO[0105] [addons] Setting up coredns                  
INFO[0105] [addons] Saving ConfigMap for addon rke-coredns-addon to Kubernetes 
INFO[0105] [addons] Successfully saved ConfigMap for addon rke-coredns-addon to Kubernetes 
INFO[0105] [addons] Executing deploy job rke-coredns-addon 
INFO[0116] [addons] CoreDNS deployed successfully       
INFO[0116] [dns] DNS provider coredns deployed successfully 
INFO[0116] [addons] Setting up Metrics Server           
INFO[0116] [addons] Saving ConfigMap for addon rke-metrics-addon to Kubernetes 
INFO[0116] [addons] Successfully saved ConfigMap for addon rke-metrics-addon to Kubernetes 
INFO[0116] [addons] Executing deploy job rke-metrics-addon 
INFO[0126] [addons] Metrics Server deployed successfully 
INFO[0126] [ingress] Setting up nginx ingress controller 
INFO[0126] [ingress] removing admission batch jobs if they exist 
INFO[0126] [addons] Saving ConfigMap for addon rke-ingress-controller to Kubernetes 
INFO[0126] [addons] Successfully saved ConfigMap for addon rke-ingress-controller to Kubernetes 
INFO[0126] [addons] Executing deploy job rke-ingress-controller 
INFO[0131] [authz] Applying default PodSecurityPolicy Role and RoleBinding in ingress-nginx 
INFO[0132] [authz] Default PodSecurityPolicy Role and RoleBinding applied successfully 
INFO[0132] [ingress] ingress controller nginx deployed successfully 
INFO[0132] [addons] Setting up user addons              
INFO[0132] [addons] Saving ConfigMap for addon rke-user-addon to Kubernetes 
INFO[0132] [addons] Successfully saved ConfigMap for addon rke-user-addon to Kubernetes 
INFO[0132] [addons] Executing deploy job rke-user-addon 
INFO[0142] [addons] User addons deployed successfully   
INFO[0142] Rewriting cluster secrets                    
INFO[0148] [rewrite-secrets] Operation completed, 40 secrets rewritten 
INFO[0148] Finished building Kubernetes cluster successfully 

microservices-security/starter on  main [!?] via ⍱ v2.2.18 on ☁️  (eu-central-1) on ☁️  oyedayooyelowo1@gmail.com(europe-central2) took 2m28s 
❯ ssh root@192.168.50.109
Last login: Wed Nov  3 04:57:29 2021 from 192.168.50.1
Have a lot of fun...
localhost:~ # docker run --pid=host -v /etc:/node/etc:ro -v /var:/node/var:ro -ti rancher/security-scan:v0.2.2 bash
root@4f5f62b76979:/# kube-bench run --targets etcd,master,controlplane,policies --scored --config-dir=/etc/kube-bench/cfg --benchmark rke-cis-1.6-hardened | grep FAIL
[FAIL] 1.1.12 Ensure that the etcd data directory ownership is set to etcd:etcd (Automated)
[FAIL] 1.1.19 Ensure that the Kubernetes PKI directory and file ownership is set to root:root (Automated)
2 checks FAIL
[FAIL] 1.1.19 Ensure that the Kubernetes PKI directory and file ownership is set to root:root (Automated)
1 checks FAIL
0 checks FAIL
[FAIL] 5.2.2 Minimize the admission of containers wishing to share the host process ID namespace (Automated)
[FAIL] 5.2.3 Minimize the admission of containers wishing to share the host IPC namespace (Automated)
[FAIL] 5.2.4 Minimize the admission of containers wishing to share the host network namespace (Automated)
[FAIL] 5.2.5 Minimize the admission of containers with allowPrivilegeEscalation (Automated)
4 checks FAIL
root@4f5f62b76979:/# 
